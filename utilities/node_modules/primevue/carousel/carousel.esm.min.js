import t from"primevue/basecomponent";import e from"primevue/icons/chevrondown";import i from"primevue/icons/chevronleft";import s from"primevue/icons/chevronright";import n from"primevue/icons/chevronup";import a from"primevue/ripple";import{DomHandler as l,UniqueComponentId as o}from"primevue/utils";import{resolveDirective as r,openBlock as d,createElementBlock as c,mergeProps as h,renderSlot as u,createCommentVNode as p,createElementVNode as m,withDirectives as f,createBlock as v,resolveDynamicComponent as g,Fragment as b,renderList as I}from"vue";var y={name:"Carousel",extends:t,emits:["update:page"],props:{value:null,page:{type:Number,default:0},numVisible:{type:Number,default:1},numScroll:{type:Number,default:1},responsiveOptions:Array,orientation:{type:String,default:"horizontal"},verticalViewPortHeight:{type:String,default:"300px"},contentClass:String,containerClass:String,indicatorsContentClass:String,circular:{type:Boolean,default:!1},autoplayInterval:{type:Number,default:0},showNavigators:{type:Boolean,default:!0},showIndicators:{type:Boolean,default:!0},prevButtonProps:{type:null,default:null},nextButtonProps:{type:null,default:null}},isRemainingItemsAdded:!1,data(){return{remainingItems:0,d_numVisible:this.numVisible,d_numScroll:this.numScroll,d_oldNumScroll:0,d_oldNumVisible:0,d_oldValue:null,d_page:this.page,totalShiftedItems:this.page*this.numScroll*-1,allowAutoplay:!!this.autoplayInterval,d_circular:this.circular||this.allowAutoplay,swipeThreshold:20}},watch:{page(t){this.d_page=t},circular(t){this.d_circular=t},numVisible(t,e){this.d_numVisible=t,this.d_oldNumVisible=e},numScroll(t,e){this.d_oldNumScroll=e,this.d_numScroll=t},value(t){this.d_oldValue=t}},mounted(){let t=!1;if(this.$el.setAttribute(this.attributeSelector,""),this.createStyle(),this.calculatePosition(),this.responsiveOptions&&this.bindDocumentListeners(),this.isCircular()){let e=this.totalShiftedItems;0===this.d_page?e=-1*this.d_numVisible:0===e&&(e=-1*this.value.length,this.remainingItems>0&&(this.isRemainingItemsAdded=!0)),e!==this.totalShiftedItems&&(this.totalShiftedItems=e,t=!0)}!t&&this.isAutoplay()&&this.startAutoplay()},updated(){const t=this.isCircular();let e=!1,i=this.totalShiftedItems;if(this.autoplayInterval&&this.stopAutoplay(),this.d_oldNumScroll!==this.d_numScroll||this.d_oldNumVisible!==this.d_numVisible||this.d_oldValue.length!==this.value.length){this.remainingItems=(this.value.length-this.d_numVisible)%this.d_numScroll;let s=this.d_page;0!==this.totalIndicators&&s>=this.totalIndicators&&(s=this.totalIndicators-1,this.$emit("update:page",s),this.d_page=s,e=!0),i=s*this.d_numScroll*-1,t&&(i-=this.d_numVisible),s===this.totalIndicators-1&&this.remainingItems>0?(i+=-1*this.remainingItems+this.d_numScroll,this.isRemainingItemsAdded=!0):this.isRemainingItemsAdded=!1,i!==this.totalShiftedItems&&(this.totalShiftedItems=i,e=!0),this.d_oldNumScroll=this.d_numScroll,this.d_oldNumVisible=this.d_numVisible,this.d_oldValue=this.value,this.$refs.itemsContainer.style.transform=this.isVertical()?`translate3d(0, ${i*(100/this.d_numVisible)}%, 0)`:`translate3d(${i*(100/this.d_numVisible)}%, 0, 0)`}t&&(0===this.d_page?i=-1*this.d_numVisible:0===i&&(i=-1*this.value.length,this.remainingItems>0&&(this.isRemainingItemsAdded=!0)),i!==this.totalShiftedItems&&(this.totalShiftedItems=i,e=!0)),!e&&this.isAutoplay()&&this.startAutoplay()},beforeUnmount(){this.responsiveOptions&&this.unbindDocumentListeners(),this.autoplayInterval&&this.stopAutoplay()},methods:{step(t,e){let i=this.totalShiftedItems;const s=this.isCircular();if(null!=e)i=this.d_numScroll*e*-1,s&&(i-=this.d_numVisible),this.isRemainingItemsAdded=!1;else{i+=this.d_numScroll*t,this.isRemainingItemsAdded&&(i+=this.remainingItems-this.d_numScroll*t,this.isRemainingItemsAdded=!1);let n=s?i+this.d_numVisible:i;e=Math.abs(Math.floor(n/this.d_numScroll))}s&&this.d_page===this.totalIndicators-1&&-1===t?(i=-1*(this.value.length+this.d_numVisible),e=0):s&&0===this.d_page&&1===t?(i=0,e=this.totalIndicators-1):e===this.totalIndicators-1&&this.remainingItems>0&&(i+=-1*this.remainingItems-this.d_numScroll*t,this.isRemainingItemsAdded=!0),this.$refs.itemsContainer&&(l.removeClass(this.$refs.itemsContainer,"p-items-hidden"),this.$refs.itemsContainer.style.transform=this.isVertical()?`translate3d(0, ${i*(100/this.d_numVisible)}%, 0)`:`translate3d(${i*(100/this.d_numVisible)}%, 0, 0)`,this.$refs.itemsContainer.style.transition="transform 500ms ease 0s"),this.totalShiftedItems=i,this.$emit("update:page",e),this.d_page=e},calculatePosition(){if(this.$refs.itemsContainer&&this.responsiveOptions){let t=window.innerWidth,e={numVisible:this.numVisible,numScroll:this.numScroll};for(let i=0;i<this.responsiveOptions.length;i++){let s=this.responsiveOptions[i];parseInt(s.breakpoint,10)>=t&&(e=s)}if(this.d_numScroll!==e.numScroll){let t=this.d_page;t=parseInt(t*this.d_numScroll/e.numScroll),this.totalShiftedItems=e.numScroll*t*-1,this.isCircular()&&(this.totalShiftedItems-=e.numVisible),this.d_numScroll=e.numScroll,this.$emit("update:page",t),this.d_page=t}this.d_numVisible!==e.numVisible&&(this.d_numVisible=e.numVisible)}},navBackward(t,e){(this.d_circular||0!==this.d_page)&&this.step(1,e),this.allowAutoplay=!1,t.cancelable&&t.preventDefault()},navForward(t,e){(this.d_circular||this.d_page<this.totalIndicators-1)&&this.step(-1,e),this.allowAutoplay=!1,t.cancelable&&t.preventDefault()},onIndicatorClick(t,e){let i=this.d_page;e>i?this.navForward(t,e):e<i&&this.navBackward(t,e)},onTransitionEnd(){this.$refs.itemsContainer&&(l.addClass(this.$refs.itemsContainer,"p-items-hidden"),this.$refs.itemsContainer.style.transition="",0!==this.d_page&&this.d_page!==this.totalIndicators-1||!this.isCircular()||(this.$refs.itemsContainer.style.transform=this.isVertical()?`translate3d(0, ${this.totalShiftedItems*(100/this.d_numVisible)}%, 0)`:`translate3d(${this.totalShiftedItems*(100/this.d_numVisible)}%, 0, 0)`))},onTouchStart(t){let e=t.changedTouches[0];this.startPos={x:e.pageX,y:e.pageY}},onTouchMove(t){t.cancelable&&t.preventDefault()},onTouchEnd(t){let e=t.changedTouches[0];this.isVertical()?this.changePageOnTouch(t,e.pageY-this.startPos.y):this.changePageOnTouch(t,e.pageX-this.startPos.x)},changePageOnTouch(t,e){Math.abs(e)>this.swipeThreshold&&(e<0?this.navForward(t):this.navBackward(t))},onIndicatorKeydown(t){switch(t.code){case"ArrowRight":this.onRightKey();break;case"ArrowLeft":this.onLeftKey();break;case"Home":this.onHomeKey(),t.preventDefault();break;case"End":this.onEndKey(),t.preventDefault();break;case"ArrowUp":case"ArrowDown":t.preventDefault();break;case"Tab":this.onTabKey()}},onRightKey(){const t=[...l.find(this.$refs.indicatorContent,".p-carousel-indicator")],e=this.findFocusedIndicatorIndex();this.changedFocusedIndicator(e,e+1===t.length?t.length-1:e+1)},onLeftKey(){const t=this.findFocusedIndicatorIndex();this.changedFocusedIndicator(t,t-1<=0?0:t-1)},onHomeKey(){const t=this.findFocusedIndicatorIndex();this.changedFocusedIndicator(t,0)},onEndKey(){const t=[...l.find(this.$refs.indicatorContent,".p-carousel-indicator")],e=this.findFocusedIndicatorIndex();this.changedFocusedIndicator(e,t.length-1)},onTabKey(){const t=[...l.find(this.$refs.indicatorContent,".p-carousel-indicator")],e=t.findIndex((t=>l.hasClass(t,"p-highlight"))),i=l.findSingle(this.$refs.indicatorContent,'.p-carousel-indicator > button[tabindex="0"]'),s=t.findIndex((t=>t===i.parentElement));t[s].children[0].tabIndex="-1",t[e].children[0].tabIndex="0"},findFocusedIndicatorIndex(){const t=[...l.find(this.$refs.indicatorContent,".p-carousel-indicator")],e=l.findSingle(this.$refs.indicatorContent,'.p-carousel-indicator > button[tabindex="0"]');return t.findIndex((t=>t===e.parentElement))},changedFocusedIndicator(t,e){const i=[...l.find(this.$refs.indicatorContent,".p-carousel-indicator")];i[t].children[0].tabIndex="-1",i[e].children[0].tabIndex="0",i[e].children[0].focus()},bindDocumentListeners(){this.documentResizeListener||(this.documentResizeListener=t=>{this.calculatePosition(t)},window.addEventListener("resize",this.documentResizeListener))},unbindDocumentListeners(){this.documentResizeListener&&(window.removeEventListener("resize",this.documentResizeListener),this.documentResizeListener=null)},startAutoplay(){this.interval=setInterval((()=>{this.d_page===this.totalIndicators-1?this.step(-1,0):this.step(-1,this.d_page+1)}),this.autoplayInterval)},stopAutoplay(){this.interval&&clearInterval(this.interval)},createStyle(){this.carouselStyle||(this.carouselStyle=document.createElement("style"),this.carouselStyle.type="text/css",document.body.appendChild(this.carouselStyle));let t=`\n                .p-carousel[${this.attributeSelector}] .p-carousel-item {\n                    flex: 1 0 ${100/this.d_numVisible}%\n                }\n            `;if(this.responsiveOptions){let e=[...this.responsiveOptions];e.sort(((t,e)=>{const i=t.breakpoint,s=e.breakpoint;let n=null;return n=null==i&&null!=s?-1:null!=i&&null==s?1:null==i&&null==s?0:"string"==typeof i&&"string"==typeof s?i.localeCompare(s,void 0,{numeric:!0}):i<s?-1:i>s?1:0,-1*n}));for(let i=0;i<e.length;i++){let s=e[i];t+=`\n                        @media screen and (max-width: ${s.breakpoint}) {\n                            .p-carousel[${this.attributeSelector}] .p-carousel-item {\n                                flex: 1 0 ${100/s.numVisible}%\n                            }\n                        }\n                    `}}this.carouselStyle.innerHTML=t},isVertical(){return"vertical"===this.orientation},isCircular(){return this.value&&this.d_circular&&this.value.length>=this.d_numVisible},isAutoplay(){return this.autoplayInterval&&this.allowAutoplay},firstIndex(){return this.isCircular()?-1*(this.totalShiftedItems+this.d_numVisible):-1*this.totalShiftedItems},lastIndex(){return this.firstIndex()+this.d_numVisible-1},ariaSlideNumber(t){return this.$primevue.config.locale.aria?this.$primevue.config.locale.aria.slideNumber.replace(/{slideNumber}/g,t):void 0},ariaPageLabel(t){return this.$primevue.config.locale.aria?this.$primevue.config.locale.aria.pageLabel.replace(/{page}/g,t):void 0}},computed:{totalIndicators(){return this.value?Math.max(Math.ceil((this.value.length-this.d_numVisible)/this.d_numScroll)+1,0):0},backwardIsDisabled(){return this.value&&(!this.circular||this.value.length<this.d_numVisible)&&0===this.d_page},forwardIsDisabled(){return this.value&&(!this.circular||this.value.length<this.d_numVisible)&&(this.d_page===this.totalIndicators-1||0===this.totalIndicators)},containerClasses(){return["p-carousel-container",this.containerClass]},contentClasses(){return["p-carousel-content ",this.contentClass]},indicatorsContentClasses(){return["p-carousel-indicators p-reset",this.indicatorsContentClass]},ariaSlideLabel(){return this.$primevue.config.locale.aria?this.$primevue.config.locale.aria.slide:void 0},ariaPrevButtonLabel(){return this.$primevue.config.locale.aria?this.$primevue.config.locale.aria.prevPageLabel:void 0},ariaNextButtonLabel(){return this.$primevue.config.locale.aria?this.$primevue.config.locale.aria.nextPageLabel:void 0},attributeSelector:()=>o()},components:{ChevronRightIcon:s,ChevronDownIcon:e,ChevronLeftIcon:i,ChevronUpIcon:n},directives:{ripple:a}};const _=["aria-live"],S=["disabled","aria-label"],C=["aria-hidden","aria-label","aria-roledescription"],x=["disabled","aria-label"],w=["tabindex","aria-label","aria-current","onClick"];!function(t,e){void 0===e&&(e={});var i=e.insertAt;if(t&&"undefined"!=typeof document){var s=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css","top"===i&&s.firstChild?s.insertBefore(n,s.firstChild):s.appendChild(n),n.styleSheet?n.styleSheet.cssText=t:n.appendChild(document.createTextNode(t))}}("\n.p-carousel {\n    display: flex;\n    flex-direction: column;\n}\n.p-carousel-content {\n    display: flex;\n    flex-direction: column;\n    overflow: auto;\n}\n.p-carousel-prev,\n.p-carousel-next {\n    align-self: center;\n    flex-grow: 0;\n    flex-shrink: 0;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    overflow: hidden;\n    position: relative;\n}\n.p-carousel-container {\n    display: flex;\n    flex-direction: row;\n}\n.p-carousel-items-content {\n    overflow: hidden;\n    width: 100%;\n}\n.p-carousel-items-container {\n    display: flex;\n    flex-direction: row;\n}\n.p-carousel-indicators {\n    display: flex;\n    flex-direction: row;\n    justify-content: center;\n    flex-wrap: wrap;\n}\n.p-carousel-indicator > button {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n}\n\n/* Vertical */\n.p-carousel-vertical .p-carousel-container {\n    flex-direction: column;\n}\n.p-carousel-vertical .p-carousel-items-container {\n    flex-direction: column;\n    height: 100%;\n}\n\n/* Keyboard Support */\n.p-items-hidden .p-carousel-item {\n    visibility: hidden;\n}\n.p-items-hidden .p-carousel-item.p-carousel-item-active {\n    visibility: visible;\n}\n"),y.render=function(t,e,i,s,n,a){const l=r("ripple");return d(),c("div",h({class:["p-carousel p-component",{"p-carousel-vertical":a.isVertical(),"p-carousel-horizontal":!a.isVertical()}],role:"region"},t.ptm("root")),[t.$slots.header?(d(),c("div",h({key:0,class:"p-carousel-header"},t.ptm("header")),[u(t.$slots,"header")],16)):p("",!0),m("div",h({class:a.contentClasses},t.ptm("content")),[m("div",h({class:a.containerClasses,"aria-live":n.allowAutoplay?"polite":"off"},t.ptm("container")),[i.showNavigators?f((d(),c("button",h({key:0,type:"button",class:["p-carousel-prev p-link",{"p-disabled":a.backwardIsDisabled}],disabled:a.backwardIsDisabled,"aria-label":a.ariaPrevButtonLabel,onClick:e[0]||(e[0]=(...t)=>a.navBackward&&a.navBackward(...t))},{...i.prevButtonProps,...t.ptm("previousButton")}),[u(t.$slots,"previousicon",{},(()=>[(d(),v(g(a.isVertical()?"ChevronUpIcon":"ChevronLeftIcon"),h({class:"p-carousel-next-icon"},t.ptm("previousButtonIcon")),null,16))]))],16,S)),[[l]]):p("",!0),m("div",h({class:"p-carousel-items-content",style:[{height:a.isVertical()?i.verticalViewPortHeight:"auto"}],onTouchend:e[2]||(e[2]=(...t)=>a.onTouchEnd&&a.onTouchEnd(...t)),onTouchstart:e[3]||(e[3]=(...t)=>a.onTouchStart&&a.onTouchStart(...t)),onTouchmove:e[4]||(e[4]=(...t)=>a.onTouchMove&&a.onTouchMove(...t))},t.ptm("itemsContent")),[m("div",h({ref:"itemsContainer",class:"p-carousel-items-container",onTransitionend:e[1]||(e[1]=(...t)=>a.onTransitionEnd&&a.onTransitionEnd(...t))},t.ptm("itemsContainer")),[a.isCircular()?(d(!0),c(b,{key:0},I(i.value.slice(-1*n.d_numVisible),((e,s)=>(d(),c("div",h({key:s+"_scloned",class:["p-carousel-item p-carousel-item-cloned",{"p-carousel-item-active":-1*n.totalShiftedItems===i.value.length+n.d_numVisible,"p-carousel-item-start":0===s,"p-carousel-item-end":i.value.slice(-1*n.d_numVisible).length-1===s}]},t.ptm("itemCloned")),[u(t.$slots,"item",{data:e,index:s})],16)))),128)):p("",!0),(d(!0),c(b,null,I(i.value,((e,i)=>(d(),c("div",h({key:i,class:["p-carousel-item",{"p-carousel-item-active":a.firstIndex()<=i&&a.lastIndex()>=i,"p-carousel-item-start":a.firstIndex()===i,"p-carousel-item-end":a.lastIndex()===i}],role:"group","aria-hidden":a.firstIndex()>i||a.lastIndex()<i||void 0,"aria-label":a.ariaSlideNumber(i),"aria-roledescription":a.ariaSlideLabel},t.ptm("item")),[u(t.$slots,"item",{data:e,index:i})],16,C)))),128)),a.isCircular()?(d(!0),c(b,{key:1},I(i.value.slice(0,n.d_numVisible),((e,s)=>(d(),c("div",h({key:s+"_fcloned",class:["p-carousel-item p-carousel-item-cloned",{"p-carousel-item-active":0===n.totalShiftedItems,"p-carousel-item-start":0===s,"p-carousel-item-end":i.value.slice(0,n.d_numVisible).length-1===s}]},t.ptm("itemCloned")),[u(t.$slots,"item",{data:e,index:s})],16)))),128)):p("",!0)],16)],16),i.showNavigators?f((d(),c("button",h({key:1,type:"button",class:["p-carousel-next p-link",{"p-disabled":a.forwardIsDisabled}],disabled:a.forwardIsDisabled,"aria-label":a.ariaNextButtonLabel,onClick:e[5]||(e[5]=(...t)=>a.navForward&&a.navForward(...t))},{...i.nextButtonProps,...t.ptm("nextButton")}),[u(t.$slots,"nexticon",{},(()=>[(d(),v(g(a.isVertical()?"ChevronDownIcon":"ChevronRightIcon"),h({class:"p-carousel-prev-icon"},t.ptm("nextButtonIcon")),null,16))]))],16,x)),[[l]]):p("",!0)],16,_),a.totalIndicators>=0&&i.showIndicators?(d(),c("ul",h({key:0,ref:"indicatorContent",class:a.indicatorsContentClasses,onKeydown:e[6]||(e[6]=(...t)=>a.onIndicatorKeydown&&a.onIndicatorKeydown(...t))},t.ptm("indicators")),[(d(!0),c(b,null,I(a.totalIndicators,((e,i)=>(d(),c("li",h({key:"p-carousel-indicator-"+i.toString(),class:["p-carousel-indicator",{"p-highlight":n.d_page===i}]},t.ptm("indicator")),[m("button",h({class:"p-link",type:"button",tabindex:n.d_page===i?"0":"-1","aria-label":a.ariaPageLabel(i+1),"aria-current":n.d_page===i?"page":void 0,onClick:t=>a.onIndicatorClick(t,i)},t.ptm("indicatorButton")),null,16,w)],16)))),128))],16)):p("",!0)],16),t.$slots.footer?(d(),c("div",h({key:1,class:"p-carousel-footer"},t.ptm("footer")),[u(t.$slots,"footer")],16)):p("",!0)],16)};export{y as default};
